{% extends '../shared/_base.html' %}
{% block title %} {{ course.title }} {% endblock %}
{% block content %}
{% load static %}
{% load i18n %}
<main class="course-path-wrapper">
    <div class="course-path">
            {% for section in course.sections.all %}
            {% cycle 'theme-green' 'theme-blue' 'theme-purple' 'theme-orange' 'theme-brown' 'theme-pink' 'theme-red' as current_theme silent %}
            <div class="unit-header {{ current_theme }}">
                <div class="unit-info">
                    <h2>Unit {{ section.order }}</h2>
                    <p>{{ section.title }}</p>
                </div>
                <a class="unit-info-btn btn-transform"><i class="fa-solid fa-book"></i>Handbook</a>
            </div>
            
            <div class="path-nodes {{ current_theme }}">
                {% for lesson in section.lessons.all %}
                    <div class="level-row">
                        <div class="level-item">
                            <a class="circle-btn" href="{% url 'lesson_detail' course.slug lesson.slug %}">
                                {% if lesson.id in completed_lessons %}
                                    <i class="fa-solid fa-check"></i>
                                {% else %}
                                    <i class="fa-solid fa-o"></i>
                                {% endif %}
                            </a>
                            <div class="tooltip">{{ lesson.title }}</div>
                        </div>
                    </div>
                    {% if lesson.has_quiz %}
                    <div class="level-row">
                        <div class="level-item">
                            <a class="circle-btn" href="#">
                                <i class="fa-solid fa-code"></i>
                            </a>
                            <div class="tooltip">Exercise</div>
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
                <div style="position: absolute; left: 20px; top: 250px; z-index: -1; opacity: 1;">
                    <img src="/statiac/img/nova.png" alt="" style="width: 220px;">
                </div>
            </div>
            {% endfor %}
            <div class="certificate-gate locked">
                <div class="gate-glow"></div>
                    <div class="gate-content">
                        <div class="trophy-icon">
                            <i class="fa-solid fa-graduation-cap"></i>
                        </div>
                        <h3>Course Certificate</h3>
                        <p>Complete all levels to unlock your certification</p>
                        <div class="gate-lock-btn">
                            <i class="fa-solid fa-lock"></i> <span>Locked</span>
                        </div>
                    </div>
            </div>
    </div>

    <aside class="right-panel">
            <div class="course-card">
                
                <div class="card-header">
                    <div class="course-name">{{ course.title }}</div>
                    <div class="percent-badge">{{ course_percentage }}%</div>
                </div>
                {% include "courses/includes/progress_bar.html" with course_percentage=course_percentage %}
                <div class="cert-section">
                    <div class="cert-icon">ðŸ“œ</div>
                    <div class="cert-details">
                        <span class="cert-title">Course Certificate</span>
                        <span class="cert-status">Finish course to unlock</span>
                    </div>
                </div>

            </div>

            <div class="card cheat-sheet">
                <div class="cheat-header">
                    <span><i class="fa-solid fa-lightbulb"></i></span>
                    <span>Cheat Sheet</span>
                </div>
                <p class="note-text">
                    <strong>Pro Tip:</strong> When using <code>position: sticky</code>, ensure the parent container doesn't have <code>overflow: hidden</code> set, or it won't work!
                </p>
            </div>
    </aside>
</main>
{% endblock content %} 